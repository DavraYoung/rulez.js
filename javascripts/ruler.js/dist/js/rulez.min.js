/*! rulez.js 2015-02-08 */
var Rulez=function(a){"use strict";function b(a){return Math.floor(p/a.pixelGap)+1}function c(a,b,c){for(var d=a;b>d;d+=c.pixelGap){var f=e(d,c);c.renderer&&c.renderer(f),o.appendChild(f)}}function d(a,b,c){for(var d=[],e=a;b>e;e+=c.pixelGap){var f=h(e,c);o.appendChild(f),c.renderer&&c.renderer(f),d.push(f)}return d}function e(a,b){switch(b.type){case"line":return f(a,b);case"rect":return g(a,b);default:return g(a,b)}}function f(a,b){var c=document.createElementNS(l,"line");if(j())var d="y1",e="y2",f="x1",g="x2";else d="x1",e="x2",f="y1",g="y2";return c.setAttribute("class",b.className),c.setAttribute(d,a),c.setAttribute(e,a),c.setAttribute(f,"0"),c.setAttribute(g,b.lineLength),c.setAttribute("stroke-width",b.strokeWidth),c}function g(a,b){var c=document.createElementNS(l,"rect");if(j())var d="y",e="x",f="width",g="height";else d="x",e="y",f="height",g="width";return c.setAttribute("class",b.className),c.setAttribute(d,a),c.setAttribute(e,"0"),c.setAttribute(f,b.lineLength),c.setAttribute(g,b.strokeWidth),c}function h(a,b){var c=document.createElementNS(l,"text");if(c.setAttribute("class",b.className),j())var d="y",e="x",f="rotate("+b.rotation+" "+b.offset+" "+a+")";else d="x",e="y",f="rotate("+b.rotation+" "+a+" "+b.offset+")";return c.setAttribute(d,a),c.setAttribute(e,b.offset),c.setAttribute("transform",f),c.textContent=a,c}function i(){return document.createElementNS(l,"g")}function j(){return"vertical"===n.layout}function k(a,b){for(var c in a)a.hasOwnProperty(c)&&b.hasOwnProperty(c)&&(a[c]=b[c]);return a.texts.forEach(function(a){a.className||(a.className="rulez-text")}),a.divisions.forEach(function(a){a.className||(a.className="line"===a.type?"rulez-line":"rulez-rect")}),a}var l="http://www.w3.org/2000/svg",m={width:null,height:null,element:null,layout:"horizontal",divisions:[{pixelGap:5,lineLength:5,strokeWidth:1,type:"rect"},{pixelGap:25,lineLength:10,strokeWidth:1,type:"rect"},{pixelGap:50,lineLength:15,strokeWidth:1,type:"rect"},{pixelGap:100,lineLength:20,strokeWidth:1,type:"rect"}],texts:[{pixelGap:100,rotation:0,offset:25,className:"rulez-text",type:"text"}]},n=k(JSON.parse(JSON.stringify(m)),a),o=i();n.width=n.width?n.width:n.element.clientWidth,n.height=n.height?n.height:n.element.clientHeight,n.element.appendChild(o);var p=0,q=0,r=[];this.render=function(){n.divisions.forEach(function(a){a.pixelGap>p&&(p=a.pixelGap)});var a=1,e=j()?n.height:n.width,f=q+e+p*a,g=q-q%p-p*a;n.divisions.forEach(function(a){c(g,f,a)}),n.texts.forEach(function(a){var c=b(a),f=q+e+a.pixelGap*c,g=q-q%a.pixelGap-a.pixelGap*c;r.push(d(g,f,a))})},this.scrollTo=function(a){q=a,j()?o.setAttribute("transform","matrix(1,0,0,1,0,"+-q%p+")"):o.setAttribute("transform","matrix(1,0,0,1,"+-q%p+",0)");for(var c=0;c<n.texts.length;c++)for(var d=n.texts[c],e=r[c],f=q%p,g=q-f,h=b(d),i=0;i<e.length;i++){var k=e[i];k.textContent=g+(i-h)*d.pixelGap}}};